#### 方案
* TCC
1. 订单服务、库存服务、积分服务 -> 绑定为一个TCC事务
2. 撤销刚才创建订单时，回滚刚才扣减库存和增加积分
* 可靠消息最终一致性 
<div style="text-indent:2em">可以去发送一个请求给消息中间件，由中间件保证一定会把消息交给下游的库存服务去扣减库存，仓储服务去通知发货等，如果这个过程中有消息发送失败，则可靠消息中间件应该保证不停的重试投递消息。</div>
        
#### 原因
<div style="text-indent:2em">一个要求强一致，一个要求最终一致。强一致主要用于核心模块，例如交易/订单等。最终一致一般用于边缘模块例如库存，通过mq去通知，保证最终一致性，也可以业务解耦。</div>

