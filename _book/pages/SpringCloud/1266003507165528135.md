#### 服务注册中心结构图
![服务注册中心结构图](/images/SpringCloud/1266003507350077503.png)
    
#### 核心思想
<div style="text-indent:2em">注册中心主从架构，分片存储服务注册表，服务按需主动拉取注册表，不用全量拉取/推送，避免反向通知瞬时高并发。</div>
    
#### 自研注意点
* 客户端
1. 服务拉取: 不用全量拉取，按需拉取(有疑问，怎么设计按需拉取)。还需要一个用于校验拉取增量数据之后数据是否完整的过程。
2. 心跳发送
3. 服务下线
* 服务端
1. 服务注册: 服务注册表注意读写高并发控制，保证线程安全，也要降低锁的争用。
2. 健康检查: 单位时间内，如果所注册服务没有续约，则要将其下线。
3. 集群同步: 根据具体业务需求，制定合适的集群架构方案，保证吞吐量。
